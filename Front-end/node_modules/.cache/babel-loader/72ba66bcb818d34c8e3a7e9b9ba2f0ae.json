{"ast":null,"code":"import _classCallCheck from\"C:/Users/PC/Documents/GitHub/TeamDer/Front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/PC/Documents/GitHub/TeamDer/Front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/PC/Documents/GitHub/TeamDer/Front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/PC/Documents/GitHub/TeamDer/Front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Redirect,Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var url='https://teamder-app.herokuapp.com/students';var Register=/*#__PURE__*/function(_React$Component){_inherits(Register,_React$Component);var _super=_createSuper(Register);function Register(props){var _this;_classCallCheck(this,Register);_this=_super.call(this,props);//check token\nvar loggedIn=false;_this.state={//Basic info\ninsertId:'',insertPassword:'',loggedIn:loggedIn,//Basic info\nstudents:[],studentId:'',studentName:'',studentYear:'',//Detail \ndescription:'',specialtyExpertise:'',birthDate:'',major:'',studyingCourse:'',password:''};return _this;}//Read all students from list\n_createClass(Register,[{key:\"fetchData\",value:function fetchData(){var _this2=this;fetch(url).then(function(res){return res.json();}).then(function(json){var list=json.filter(function(s){return typeof s.studentId!=='undefined'&&s.studentId!==\"\";});_this2.setState({students:list});});}//render \n},{key:\"componentDidMount\",value:function componentDidMount(){this.fetchData();}},{key:\"handleChange\",value:function handleChange(e){var obj={};obj[e.target.name]=e.target.value;this.setState(obj);}},{key:\"handleLogin\",value:function handleLogin(e){e.preventDefault();if(this.state.insertId===\"A\"&&this.state.insertPassword===\"A\"){location.replace(\"/AdminPage\");}else{fetch(url).then(function(res){return res.json();});for(var i=0;i<this.state.students.length;i++){if(this.state.insertId===this.state.students[i].studentId){if(this.state.insertPassword===this.state.students[i].password){localStorage.setItem(\"token\",this.state.students[i].studentId);this.setState({loggedIn:true});// this.props.history.push('/Selection');\n}else{this.setState({message:\"Invalid name or password! Please try again. \"});return false;}}}this.setState({message:\"Invalid! Please try again. \"});}}// login() {\n//     if ((this.state.studentId !== \"\") &&(this.state.password !== \"\")) {\n//         console.log(this.state);\n//         fetch(url, {\n//             method: 'POST',\n//             body: JSON.stringify({ studentId: this.state.studentId, password: this.state.password })\n//         }).then(res => res.json())\n//            // .then(json => this.checkResult(json))\n//         //    .then(res => res.json())\n//         // .then(json => this.checkResult( json))\n//         //.then(function(response) => response.json())\n//         .then((responseData) => {\n//         console.log(responseData);\n//         })\n//         //this.setState({ message: \"Login Succesfully  \" })\n//     } else {\n//         this.setState({ message: \"Login failed \" })\n//     }\n// }\n},{key:\"render\",value:function render(){if(this.state.loggedIn){return/*#__PURE__*/_jsx(Redirect,{to:\"/Home\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 card border-success px-0\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"card-header pt-2\",children:\"Enter your ID and Password to login\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\" User ID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"insertId\",className:\"form-control\",placeholder:\"Enter User ID\",value:this.state.insertId,onChange:this.handleChange.bind(this)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"insertPassword\",className:\"form-control\",placeholder:\"Enter Password\",value:this.state.insertPassword,onChange:this.handleChange.bind(this)})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:this.handleLogin.bind(this),className:\"btn btn-success mb-3\",children:\"Log in\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h6\",{className:\"text-warning\",children:this.state.message})}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Don't have an account ?\",/*#__PURE__*/_jsx(Link,{to:\"/Register\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-info ml-2\",children:\" Register\"})})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\"})]});}}]);return Register;}(React.Component);export{Register as default};","map":{"version":3,"sources":["C:/Users/PC/Documents/GitHub/TeamDer/Front-end/src/components/Login.jsx"],"names":["React","Redirect","Link","url","Register","props","loggedIn","state","insertId","insertPassword","students","studentId","studentName","studentYear","description","specialtyExpertise","birthDate","major","studyingCourse","password","fetch","then","res","json","list","filter","s","setState","fetchData","e","obj","target","name","value","preventDefault","location","replace","i","length","localStorage","setItem","message","handleChange","bind","handleLogin","Component"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport { Redirect, Link } from 'react-router-dom'\r\n\r\nconst url = 'https://teamder-app.herokuapp.com/students'\r\nexport default class Register extends React.Component {\r\n\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        //check token\r\n        let loggedIn = false\r\n        this.state = {\r\n\r\n            //Basic info\r\n            insertId: '',\r\n            insertPassword: '',\r\n            loggedIn,\r\n\r\n            //Basic info\r\n            students: [],\r\n\r\n            studentId: '',\r\n            studentName: '',\r\n            studentYear: '',\r\n\r\n            //Detail \r\n            description: '',\r\n            specialtyExpertise: '',\r\n            birthDate: '',\r\n            major: '',\r\n            studyingCourse: '',\r\n            password: ''\r\n\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n    //Read all students from list\r\n    fetchData() {\r\n        fetch(url).then(res => res.json())\r\n            .then(json => {\r\n\r\n                var list = json.filter(s => typeof s.studentId !== 'undefined' && s.studentId !== \"\")\r\n                this.setState({ students: list })\r\n            })\r\n    }\r\n\r\n\r\n    //render \r\n    componentDidMount() {\r\n        this.fetchData()\r\n    }\r\n\r\n    handleChange(e) {\r\n        var obj = {}\r\n        obj[e.target.name] = e.target.value\r\n        this.setState(obj)\r\n    }\r\n\r\n\r\n\r\n    handleLogin(e) {\r\n        e.preventDefault()\r\n        if( this.state.insertId === \"A\" && this.state.insertPassword ===\"A\"){\r\n            location.replace(\"/AdminPage\")\r\n        }else{\r\n            fetch(url).then(res => res.json())\r\n        for (let i = 0; i < this.state.students.length; i++) {\r\n            if (this.state.insertId === this.state.students[i].studentId) {\r\n                if (this.state.insertPassword === this.state.students[i].password) {\r\n                    localStorage.setItem(\"token\",this.state.students[i].studentId)\r\n                    this.setState({\r\n                        loggedIn: true\r\n                    })\r\n                    // this.props.history.push('/Selection');\r\n\r\n                } else {\r\n                    this.setState({ message: \"Invalid name or password! Please try again. \" })\r\n                    return false;\r\n                }\r\n            }\r\n\r\n        }\r\n        this.setState({ message: \"Invalid! Please try again. \" })\r\n        }\r\n        \r\n    }\r\n    // login() {\r\n    //     if ((this.state.studentId !== \"\") &&(this.state.password !== \"\")) {\r\n    //         console.log(this.state);\r\n    //         fetch(url, {\r\n    //             method: 'POST',\r\n    //             body: JSON.stringify({ studentId: this.state.studentId, password: this.state.password })\r\n    //         }).then(res => res.json())\r\n    //            // .then(json => this.checkResult(json))\r\n    //         //    .then(res => res.json())\r\n    //         // .then(json => this.checkResult( json))\r\n    //         //.then(function(response) => response.json())\r\n    //         .then((responseData) => {\r\n    //         console.log(responseData);\r\n    //         })\r\n    //         //this.setState({ message: \"Login Succesfully  \" })\r\n\r\n    //     } else {\r\n    //         this.setState({ message: \"Login failed \" })\r\n    //     }\r\n\r\n\r\n    // }\r\n    render() {\r\n        if (this.state.loggedIn) {\r\n            return <Redirect to=\"/Home\" />\r\n        }\r\n        return (\r\n            <div className=\"row\">\r\n                <div className=\"col-md-3\"></div>\r\n                <div className=\"col-md-6 card border-success px-0\">\r\n                    <p className='card-header pt-2'>Enter your ID and Password to login</p>\r\n                    <div className='card-body'>\r\n                        <div className=\"form-group\">\r\n                            <label> User ID</label>\r\n                            <input type=\"text\" name=\"insertId\" className=\"form-control\" placeholder=\"Enter User ID\" value={this.state.insertId} onChange={this.handleChange.bind(this)}/>\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label>Password</label>\r\n                            <input type=\"text\" name=\"insertPassword\" className=\"form-control\" placeholder=\"Enter Password\" value={this.state.insertPassword} onChange={this.handleChange.bind(this)}/>\r\n                        </div>\r\n                        <div>\r\n                            <button onClick={this.handleLogin.bind(this)} className=\"btn btn-success mb-3\">Log in</button>\r\n                        </div>\r\n                        <div>\r\n                            <h6 className='text-warning'>{this.state.message}</h6>\r\n                        </div>\r\n                        <div>\r\n                            Don't have an account ? \r\n                            <Link to=\"/Register\">\r\n                                <button className=\"btn btn-info ml-2\"> Register</button>\r\n                            </Link>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"col-md-3\"></div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n"]},"metadata":{},"sourceType":"module"}